---
title: 集合
tags: Java
categories: 后端开发
---

集合
<!-- more -->

#基本概念
## 集合与数组的区别
* 数组：大小固定，只能存储相同数据类型的数据
* 集合：大小可动态扩展，可以存储各种类型的数据

## 数据结构
* 数组
* 链表
    * 单向链表
    * 双向链表
* 树
    * 二叉树
    * 红黑树
* 哈希表

## Collection
单列集合,存储的元素是单独出现的
### List
有序（输出的顺序就是插入的顺序）并且允许重复，元素可以为null
* ArrayList
基于动态数组实现，查询快，增删慢
* LinkedList
基于双向链表实现，查询慢，增删快
* Vector
同ArrayList，但是线程安全的（使用Synchronized关键字），性能略低于ArrayList
    * Stack
    继承Vector,用于模拟“栈”，后进先出
### Set
无序（输出的顺序不一定是插入的顺序）并且不允许重复，元素有且只有一个可以为null
如何判断重复：hashCode和equals
* HashSet
基于HashMap的key实现，value为同一个值，无序
    * LinkedHashSet
    基于LinkedHashMap实现，使用链表维护元素的次序，性能略低于HashSet
* SortedSet（接口）
    * TreeSet
    基于TreeMap实现，可以确保集合元素处于排序状态，支持两种排序方式：自然排序或定制排序
* EnumSet（不常用）
EnumSet中所有元素都必须是指定枚举类型的枚举值
### Queue
用于模拟“队列”，先进先出
* PriorityQueue
* Deque

## Map
双列集合，存储的元素是成对出现的
用于存储键值对，根据键得到值，因此键不允许键重复,但允许值重复
* HashMap（重点掌握工作原理及代码实现）
基于哈希表实现
    * LinkedHashMap
    使用链表维护元素的次序，性能略低于HashMap
    * ConcurrentHashMap
* HashTable
同HashMap,但是线程安全的，且键和值都不允许为null,性能略低于HashMap
    * Properties 
    用于模拟“属性文件”
* SortedMap（接口）
    * TreeMap
    基于红黑树实现，可以确保集合元素处于排序状态，支持两种排序方式：自然排序或定制排序
* WeakHashMap
与HashMap基本相似，但HashMap的key保留了对实际对象的"强引用",而WeakHashMap的key只保留了对实际对象的“弱引用”，影响垃圾回收
* IdentityHashMap
与HashMap基本相似，但当且仅当两个key严格相等(key1 == key2)时，IdentityHashMap才认为两个key相等
* EnumMap
EnumMap是一个与枚举类一起使用的Map实现，EnumMap中的所有key都必须是单个枚举类的枚举值。创建EnumMap时必须显式或隐式指定它对应的枚举类。EnumMap根据key的自然顺序(即枚举值在枚举类中的定义顺序)

## 扩容机制
1. HashMap（HashSet） 、HashTable
* HashMap
初始容量：16
扩容因子：0.75，即当 元素个数 超过 容量长度的0.75倍 时，进行扩容
扩容后长度：原长度 * 2
* HashTable
初始容量：11
扩容因子：同HashMap
扩容后长度：原长度 * 2 + 1
2. ArrayList、Vector、CopyOnWriteArrayList
* ArrayList
初始容量：10
扩容时机：
扩容后长度：原长度 * 1.5
* Vector
初始容量：10
加载因子为1：即当 元素个数 超过 容量长度 时，进行扩容
扩容后长度：原长度 * 2