---
title: 互联网三高之解决方案(1)
tags: 分布式
categories: Edge
---

    如何应对C10K（在一秒之内连接客户端的数目为10k即1万）问题，最简单的思路就是，让每个服务器都能完成全部的请求，然后把请求随机的发给任何一个服务器处理（集群：相同业务部署在不同机器上，采用DNS轮询）。然而，单纯的请求随机转发，并不能解决一切问题。比如Session不会在服务器间共享。至此，一个典型的三层结构出现了：接入、逻辑、存储（分布式：不同业务部署在不同机器上）。然而现实中并不止三层这么简单，并且管理的复杂性也非常高。
<!-- more -->
# 负载均衡
如何同时处理多个请求的问题上，业界有2个典型的方案：多线程和异步。多线程容易造成死锁，并且线程切换开销比较大，当非阻塞I/O出来后，异步比多线程更流行。典型的框架有Nginx（反向代理服务器）。

# 分布式Session
* 粘性Session
* 服务器Session复制
* Sesssion共享
* Session持久化
* Terracotta实现Session复制

# 最终一致性
CAP理论

## 分布式锁
* 基于数据库实现
* 基于缓存实现
* 基于Zookeeper实现

## 分布式事务
* 两阶段提交（2PC）
* MQ事务消息
* 补偿事务（TCC）